SnowRegionWorld:
  type: world
  events:
    on player enters coldplace:
    - flag player Cold
    - run SnowRegion
    on player exits coldplace:
    - flag player Cold:!
    on <t>:
    - if <player.location.cuboids.contains[li@cu@coldplace]> {
      - determine cancelled
      }

SnowRegion:
  type: task
  script:
  - if <player.has_flag[Cold]>
    {
    - if <player.location.find.surface_blocks[<i@fire>].within[5]> == <li@>
      {
      - wait 10
      - run SnowRegion
      }
      else {
      - if <player.equipment.chestplate.material.starts_with[m@leather]> 
        {
        - if <player.equipment.leggings.material.starts_with[m@leather]> 
          {
          - if <player.equipment.boots.material.starts_with[m@leather]>
            {
            - wait 10
            - run SnowRegion
            }
            else
            {
            - hurt 10
            - wait 10
            - run SnowRegion
            }
          }
          else
          {
          - hurt 10
          - wait 10
          - run SnowRegion
          }
        }
        else
        {
        - hurt 10
        - wait 10
        - run SnowRegion
        }
      }
    }
    else
    {
    - queue clear
    }
    
#Totems:
#ex run TotemTaskScript player:<l@788,62,3063,aetheria.find.players.within[20].get[1]>
TotemGlacier:
  type: task
  script:
  - teleport <player.location.find.players.within[<20.20>]> <l@5842,57,-6349,aetheria>
  # /ex teleport <player.location.find.players.within[<20.20>]> <l@778,60,3063,aetheria>
GlacierTotem:
  type: task
  script:
  - teleport <player.location.find.players.within[<20.20>]> <l@779,60,3063,aetheria>
GlacierKey:
  type: item
  material: i@diamond
  display name: <&b>Keyshard of Frost
  lore:
  - A shard of pure ice made in
  - the shape of a key. Used to
  - pass through the barrier
  - to the Glaciers.
  recipe:
  - i@water_bucket|i@water_bucket|i@water_bucket
  - i@water_bucket|i@diamond|i@water_bucket
  - i@water_bucket|i@water_bucket|i@water_bucket
TotemDungeon:
  type: task
  script:
  - teleport <player.location.find.players.within[<20.20>]> <l@-78,136,-500,goblinworld>
DungeonTotem:
  type: task
  script:
  - teleport <player.location.find.players.within[<40.40>] <l@779,60,3063,aetheria>
MiniDungeonKey:
  type: item
  material: i@diamond[flags=HIDE_ENCHANTS]
  display name: <&d>Corrupted Keyshard
  lore:
  - A shard of pure energy made in
  - the shape of a key.
  - The shape itself seems familiar...
  enchantments:
  - lure:1
TotemMerrygold:
  type: task
  script:
  - teleport <player.location.find.players.within[<40.40>] <l@-410.5,50.0,-246.5,Noramir>
MerrygoldTotem:
  type: task
  script:
  - teleport <player.location.find.players.within[<40.40>] <l@779,60,3063,aetheria>
MerrygoldKey:
  type: item
  material: i@diamond[flags=HIDE_ENCHANTS]
  display name: <&a>Mysterious Keyshard
  lore:
  - A shard of laced intertwined
  - flora made in the shape of
  - a key. Used to pass through
  - the barrier to Merrygold.
  recipe:
  - i@water_bucket|i@emerald_block|i@water_bucket
  - i@yellow_flower|i@diamond_block|i@yellow_flower
  - i@water_bucket|i@emerald_block|i@water_bucket