TeslaWorld:
  type: world
  events:
    on player enters Tesla1Out:
    - narrate "<&b>[World]<&co> Your hair begins to stand up on end. A soft buzzing and crackling fills the air."
    on player enters Tesla1In:
    - narrate "<&b>[World]<&co> The hum intensifies. You feel a soft buzzing in your teeth."
    on player enters Tesla1Kill:
    - narrate "<&b>[World]<&co> -BRRTT-"
    - showfake WHITE_STAINED_GLASS|CYAN_STAINED_GLASS <player.location.points_between[l@1838.3,20,-1335.3,buildworld]> <player.location> players:<player.location.find.players.within[<50.50]>> d:1s
    - strike <player.location>
    - wait 0.5
    - narrate "<&b>[World]<&co> -BRRTT-"
    - showfake WHITE_STAINED_GLASS|CYAN_STAINED_GLASS <player.location.points_between[l@1838.3,20,-1335.3,buildworld]> <player.location> players:<player.location.find.players.within[<50.50]>> d:1s
    - wait 0.5
    - strike <player.location>
    - narrate "<&b>[World]<&co> -BRRTT-"
    - wait 0.5
    - showfake WHITE_STAINED_GLASS|CYAN_STAINED_GLASS <player.location.points_between[l@1838.3,20,-1335.3,buildworld]> <player.location> players:<player.location.find.players.within[<50.50]>> d:1s
    - strike <player.location>
    on player leaves Tesla1Out:
    - narrate "<&b>[World]<&co> The buzzing abates. You feel slightly sick."
    
    
ServoSkull:
  type: command
  name: ss
  description: Acquire lesser bitches
  usage: /ss
  permission: infernal.rex.only
  script:
  - execute as_server "mythicmobs eggs give Infernal_Rex ServoSkull 1"
RenownReset:
  type: task
  script:
  - flag player GrandSonn:0
  - flag player Arken:0
  - flag player Monsters:0
  - flag player Natives:0
  - flag player General:0

MerrygoldWorld:
  type: task
  script:
  - teleport <l@-356,57,946,Aetheria.find.players.within[<1.1]>> <l@-410.4843953103497,50.0,-246.6,Merrygold>
Dungeons:
  type: world
  events:
    on player right clicks chest in RexLab:
    - teleport <player.name> <l@-519.456165,6,-937.52019,buildworld>
    on player right clicks chest in RexLab2:
    - teleport <player.name> <l@2154,153,121,Aetheria>
    on player leaves pacube:
    - determine cancelled
    on player consumes LanguagePotion:
    - flag player Translator duration:480s
    - narrate "Foreign Languages seem familiar to you..."
    on player breaks block in arkenisle:
    - if <player.has_flag[graylisted]> {
      - determine cancelled
      }
    on player places block in arkenisle:
    - if <player.has_flag[graylisted]> {
      - determine cancelled
      }
    on player enters mesadungeon:
    - narrate "<&e>A daunting, holy air moves through you."
    on player breaks block in mesadungeon:
    - if <player.has_flag[BUILDING]> 
      {
      }
      else 
      {
      - determine cancelled
      }
    on player places block in WGTEST:
    - if <player.has_flag[BUILDING]> 
      {
      }
      else 
      {
      - determine cancelled
      }
    on player places hanging in WGTEST:
    - if <player.has_flag[BUILDING]>
      {
      }
      else 
      {
      - determine cancelled
      }
    on player enters airdungeon:
    - narrate "<&a>A daunting, holy air moves through you."
    on player breaks block in airdungeon:
    - if <player.has_flag[BUILDING]> 
      {
      }
      else 
      {
      - determine cancelled
      }
    on player places block in airdungeon:
    - if <player.has_flag[BUILDING]> 
      {
      }
      else 
      {
      - determine cancelled
      }
    on player places hanging in airdungeon:
    - if <player.has_flag[BUILDING]>
      {
      }
      else 
      {
      - determine cancelled
      }
    on player enters arkendungeon:
    - narrate "<&c>A daunting, holy air moves through you."
    on player breaks block in arkendungeon:
    - if <player.has_flag[BUILDING]> 
      {
      - narrate "you good!"
      }
      else 
      {
      - determine cancelled
      }
    on player places block in arkendungeon:
    - if <player.has_flag[BUILDING]> 
      {
      }
      else 
      {
      - determine cancelled
      }
    on player places hanging in arkendungeon:
    - if <player.has_flag[BUILDING]>
      {
      }
      else 
      {
      - determine cancelled
      }
Archetype2:
  type: task
  script:
  - execute as_server "pex user <player.name> group add Archetype2"
  - execute as_server "pex user <player.name> group add whitelisted"
Profession2:
  type: task
  script:
  - execute as_server "pex user <player.name> group add Profession2"
  - execute as_server "pex user <player.name> group add whitelisted"

regionstartup:
  type: world
  events:
    on system time [hourly]:
    - execute as_server "mythicmobs mobs killall"
    - execute as_server "mythicmobs reload"
    on command:
    - if <context.args> == li@options
      {
      - determine cancelled
      }
      else {
      - if <context.command> == <T> {
        - if <player.location.cuboids> == <li@cu@coldplace> {
          - narrate "<&b>You cannot run from winter."
          - determine cancelled
          }
          else {}
        }
      }
    on player interacts with 116:
    - determine cancelled
    on server start:
    - note cu@-186,256,-928,buildworld|-466,1,-534,buildworld as:pacube
    - note cu@3900,255,-2200,aetheria|4230,0,-1950,aetheria as:arkendungeon
    - note cu@491,0,-2329,aetheria|713,231,-2093,aetheria as:airdungeon 
    - note cu@-3913,0,4344,aetheria|-3775,255,4597,aetheria as:mesadungeon
    - note cu@-2719,37,972,aetheria|-2697,87,1000,aetheria as:mnestb
    - note cu@-102,0,-2159,aetheria|49,230,-2032,aetheria as:limuria
    - note cu@-1483,0,2793,aetheria|-1384,121,2909,aetheria as:forestmaze
    - note cu@-1891,23,1661,aetheria|-1853,113,1708,aetheria as:mnestd
    - note cu@-1477,44,-486,aetheria|-1446,77,-453,aetheria as:mnestc
    - note cu@-2740,65,2242,aetheria|-2717,90,2265,aetheria as:cishrine6
    - note cu@1317,1,-4850,aetheria|1452,152,-4767,aetheria as:airtribe
    - note cu@-1808,92,1859,aetheria|-1793,117,1872,aetheria as:cishrine3
    - note cu@-348,57,2174,aetheria|-322,81,2198,aetheria as:cishrine4
    - note cu@-487,59,880,aetheria|-476,69,890,aetheria as:easternforest_shrine
    - note cu@-1331,82,1690,aetheria|-1312,108,1703,aetheria as:cishrine1
    - note cu@-1212,70,1851,aetheria|-1185,109,1879,aetheria as:cishrine2
    - note cu@28,48,-31,aetheria|59,88,-3,aetheria as:pitasinn
    - note cu@-3475,4,2304,aetheria|-2962,248,2678,aetheria as:pimple
    - note cu@-806,10,2420,aetheria|-707,107,2508,aetheria as:d1
    - note cu@-94,35,-76,aetheria|103,144,76,aetheria as:fishycompound
    - note cu@-2292,42,-242,aetheria|-2229,92,-178,aetheria as:shipwreckcove
    - note cu@-2141,0,1787,aetheria|-2013,132,1858,aetheria as:merchanttown
    - note cu@-1036,1,961,aetheria|-919,222,1150,aetheria as:primnee
    - note cu@-3262,69,819,aetheria|-3244,78,840,aetheria as:flowerglade_shrine
    - note cu@-1559,85,-955,aetheria|-1543,115,-929,aetheria as:tavern
    - note cu@-2100,0,-724,aetheria|-1646,179,-455,aetheria as:farm
    - note cu@-1758,0,-1104,aetheria|-1291,221,-758,aetheria as:grandsonn
    - note cu@491,0,-2329,aetheria|713,231,-2093,aetheria as:eagledungeon
    - note cu@-2215,62,1393,aetheria|-2194,77,1412,aetheria as:rottentent1
    - note cu@-2576,8,2501,aetheria|-2498,129,2569,aetheria as:gaimdungeon
    - note cu@-523,57,236,aetheria|-509,67,245,aetheria as:nativecamp_shrine
    - note cu@-3329,1,1471,aetheria|-3173,144,1687,aetheria as:gladehaven
    - note cu@-1986,138,379,aetheria|-1909,210,502,aetheria as:darknesstown
    - note cu@-2424,3,718,aetheria|-2192,160,947,aetheria as:sonn
    - note cu@2407,0,-2542,aetheria|2633,135,-2413,aetheria as:watertribetown
    - note cu@-3913,0,4434,aetheria|-3775,184,4597,aetheria as:mesadungeon
    - note cu@-1243,1,107,aetheria|-1105,86,229,aetheria as:cryptmaze
    - note cu@-270,0,2376,aetheria|-146,203,2606,aetheria as:firetribe
    - note cu@-699,40,695,aetheria|-663,90,728,aetheria as:mnest1
    - note cu@-2032,0,-1671,aetheria|-1963,145,-1552,aetheria as:vyssini_fehikso
    - note cu@-737,46,321,aetheria|-673,81,397,aetheria as:spidercave
    - note cu@-339,57,1787,aetheria|-219,181,1877,aetheria as:firegodtree
    - note cu@2407,0,-2542,aetheria|2633,135,-2241,aetheria as:watertribe
    - note cu@2407,0,-2412,aetheria|2633,135,-2241,aetheria as:fusapath
    - note cu@-2097,38,-742,aetheria|-1784,176,-501,aetheria as:douglass
    - note cu@-1185,2,1976,aetheria|-907,209,2301,aetheria as:miserytown
    - note cu@3010,0,-3220,aetheria|5774,251,-113,aetheria as:arkenisle
    - note cu@4120,251,-7750,aetheria|8060,0,-4400,aetheria as:coldplace
    on player exits arkenisle:
    - if <player.has_flag[graylisted]> {
      - determine cancelled
      }
      else {
      }

ArkenWhitelist:
  type: assignment
  actions:
    on assignment:
    - chat "Assignment Set"
    on click:
    - flag player graylisted:!
    - execute as_op "eco give <player.name> 1800"
    - chat "Hello! I can take you to any of the following hubs:"
    - chat "Pita's Inn (Neutral), Sonn (Colonist), or you can remain here."
    - narrate "Pita|Sonn|Stay here"
  interact scripts:
  - 1 ArkenWhitelistI
ArkenWhitelistI:
  type: interact
  steps:
    1:
      chat trigger:
        1:
          trigger: /Regex:Pita|pita|inn|Inn/.
          script:
          - execute as_op "warp Pita <player.name>"
          - remove <npc>
        2:
          trigger: /Regex:Sonn|sonn|colonist|Colonist/.
          script:
          - execute as_op "warp spawntown <player.name>"
          - remove <npc>
        3:
          trigger: /Regex:Stay|stay|Here|here/.
          script:
          - chat "Alrighty then! There's a boat to the Inn here on the docks."
          - remove <npc>
NavalPerms:
  type: task
  script:
  - execute as_server "pex user <player.name> group add NavyPerms waterworld"
  - execute as_server "pex user <player.name> group add whitelisted"
NavalPerms2:
  type: task
  script:
  - execute as server "pex user <player.name> group remove NavyPerms waterworld"
NavyEventTo:
  type: assignment
  actions:
    on click:
    - run NavalPerms
    - teleport <player> l@369,64,539,waterworld
NavyEventFrom:
  type: assignment
  actions:
    on click:
    - run NavalPerms2
    - teleport <player> l@-2243,54,-596,aetheria
LootboxNPC:
  type: assignment
  actions:
    on click:
    - run AetheriaLootbox
AetheriaLootbox:
  type: task
  script:
  - chat "You won... "
  - random {
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier1
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier2
    - run LootboxTier3
    - run LootboxTier3
    - run LootboxTier3
    }
LootboxTier1:
  type: task
  script:
  - random {
    - chat "<&f>a block of stone!"
    - chat "<&f>100 widgets!"
    - chat "<&f>500 skill XP!"
    - chat "<&f>a red rose!"
    - chat "<&f>100 enjin points!"
    }
LootboxTier2:
  type: task
  script:
  - random {
    - chat "<&d>32 Knowledge Stones!"
    - chat "<&d>Zhorse perms!"
    - chat "<&d>Shop perms!"
    - chat "<&d>500 enjin points!"
    - chat "<&d>500 wigets!"
    - chat "<&d>1 stack of diamonds!"
    }
LootboxTier3:
  type: task
  script:
  - random {
    - chat "<&b>a specialty item!"
    - chat "<&b>Ship perms! (Requires Archetype Addon)"
    - chat "<&b>Cannon perms! (Requires Archetype Addon)"
    - chat "<&b>1000 enjin points!"
    - chat "<&b>5000 widgets!"
    - chat "<&b>a custom, lesser god!"
    }