monsterwithina:
  type: assignment
  actions:
    on assignment:
    - narrate "Assignment set."
  interact scripts:
  - 1 monsterwithini
monsterwithini:
  type: interact
  steps:
    1:
      chat trigger:
        1:
          trigger: /Regex:Hello|Hi|Hey|Greetings|Good Day/.
          script:
          - if <player.flag[monsterwithincomplete]> {
              - narrate "You explained to the daughter what you saw."
              - wait 2
              - chat "I... I don't believe you... I don't."
              - wait 2
              - chat "My daddy will come back home to me. I believe in him."
              - wait 2
              - chat "He wouldn't leave me... He wouldn't..."
              - wait 2
              - chat "*She hangs her head, then turns around, saddened.*"
              - wait
              - chat "Un...stoppable..."
              - give memorybottle15
              }
              else {
              - if <player.flag[monsterwithinstart]> {
                - chat "You came back... Did you... find him?"
                - wait 2
                - chat "Please... anything helps..."
                }
                else {
                - chat "Oh... hello there..."
                - wait 2
                - chat "*The girl looks down, then around, really anywhere but you.*"
                - narrate "Who are you, what's wrong, rumors, the town?"
                }
              }  
        2:
          trigger: What's /Regex:Wrong|wrong/?
          script:
            - chat "It's... just my dad. He went out to go get some supplies..."
            - wait 2
            - chat "But.. he hasn't come back yet. It's nothing... he'll probably come home soon..."
            - narrate "Who are you, what's wrong, rumors, the town, offer help?"
        3:
          trigger: /Regex:Offer Help|help|offer/.
          script:
            - chat "You... want to help me?"
            - chat "*Her face lights up slightly.*"
            - wait 2
            - chat "The last time I saw him... he was going to scour the mountain line to the North West-"
            - wait 2
            - chat "of here... he loves the mountaintops. Please... find him."
            - flag player monsterwithinstart
        4:
          trigger: /Regex:The Town|town|merchants/?
          script:
            - chat "Moneta... it's a nice little place. Natives and Colonists trying to sell wares together."
            - wait 3
            - chat "We've never had anything really go wrong here... my daddy and I would always come-"
            - wait 3
            - chat "To sell gems and things that we've found in our travels..."
            - narrate "Who are you, what's wrong, rumors, the town?"
        5:
          trigger: /Regex:Who|who|you|You|Yourself/?
          script:
            - chat "My name is Hailee. My dad and I come here to sell things..."
            - wait 1
            - chat "*She turns... seeming to close off a bit.*"
            - narrate "Who are you, what's wrong, rumors, the town?"
        6:
          trigger: /Regex:Rumors|rumor|Rumor|rumors/?
          script:
            - chat "R-rumors? I... I don't know any right now..."
            - wait 2
            - chat "I'm... kinda busy."
monsterwithingirl:
  type: task
  script:
  - chat "I... I don't believe you... I don't."
  - wait 2
  - chat "My daddy will come back home to me. I believe in him."
  - wait 2
  - chat "He wouldn't leave me... He wouldn't..."
  - wait 2
  - chat "*She hangs her head, then turns around, saddened.*"
  - give memorybottle15
  - flag player monsterwithinfinish:false
monsterwithina2:
  type: assignment
  actions:
    on assignment:
    - narrate "Assignment Set."
  interact scripts:
  - 1 monsterwithini2
monsterwithini2:
  type: interact
  steps:
    1:
      proximity trigger:
        entry:
          script:
          - if <player.flag[monsterwithinstart]> {
            - chat "You... my daughter sent you... didn't she."
            - chat "*cough cough*"
            - wait 3
            - chat "I... wish I had better news... but I need you to tell her..."
            - wait 2
            - chat "Tell her..."
            - wait 2
            - chat "That I can't come home."
            - wait 2
            - chat "When... I was out... that strange storm struck me..."
            - wait 2
            - chat "I'm sick... traveler. I fear I'm contagious."
            - wait 2
            - chat "I... don't have much time left... please..."
            - wait 2
            - chat "Tell her I love her... and that I've gone to see mom."
            - wait 2
            - chat "*He goes silent.*"
            - give memorybottle16
            - flag player monsterwithinstart:false
            - flag player monsterwithincomplete
            }
            else {
            - chat "The man is silent... hopefully sleeping."
            }

onhardtimesa:
  type: assignment
  actions:
    on assignment:
    - chat "Assignment Set."
  interact scripts:
  - 1 onhardtimesi
onhardtimesi:
  type: interact
  steps:
    1:
      chat trigger:
        1:
          trigger: /Regex:Hello|Hi|Hey|Greetings|Good day/.
          script:
            - chat "Ah, good evening friend."
            - wait 2
            - chat "Are you perhaps interested in my wares?"
            - narrate "Wares?|Work?|Moneta?|Rumors?"
        2:
          trigger: /Regex:Wares|wares|offer|Offer/
          script:
            - chat "I currently offer the items behind me..."
            - wait 1
            - chat "Moreso curiosities than anything. Things that some"
            - chat "of the tribes gave me in my tradings."
            - wait 2
            - chat "I'm a little low now on supplies though, to be fair."
            - wait 2
            - chat "Anyway, as of right now, I've got a couple talismans, some ornamental feathers,"
            - chat "and some instruments. Anything catch your fancy?"
            - wait 3
            - narrate "Talismans|Ornaments|Instruments|No thanks"
        3:
          trigger: /Regex:Talisman|Talismans|talisman|talismans/
          script:
            - chat "I've picked up a necklace from the Central Isle, as well as a pendant from the Southern one."
            - wait 2
            - chat "The necklace is highly polished, decorated, and worth a fair penny if you choose to sell it."
            - wait 2
            - chat "The pendant is rumored to bring you the God's Luck."
            - wait 2
            - chat "Any of those sound interesting?"
            - narrate "Necklace|Pendant|No Thanks"
        4:
          trigger: /Regex:Necklace|necklace/
          script:
            - chat "One necklace for you..."
            - wait 2
            - chat "I'll offer that for a wee 700 widgets."
            - wait 2
            - chat "Sound fair?"
            - narrate "Yes|No|Bribe(Knowledge Stones Required)"
            - zap step:TalisPay
        5:
          trigger: /Regex:Pendant|pendant/
          script:
            - chat "One pendant for you..."
            - wait 2
            - chat "I'll offer that for a wee 700 widgets."
            - wait 2
            - chat "Sound fair?"
            - narrate "Yes|No|Bribe(Knowledge Stones Required)"
            - zap step:Talis2Pay
        6:
          trigger: /Regex:Ornaments|ornaments|Ornament|ornament/
          script:
            - chat "I've picked up a couple ornamental feathers... yes..."
            - wait 2
            - chat "I'll offer thosse for 20 widgets a piece."
            - wait 2
            - chat "Sound fair?"
            - narrate "Yes|No"
            - zap step:FeatherPay
        7:
          trigger: /Regex:Instruments|intruments|Instrument|instrument/
          script:
            - chat "Things are low, but I've got a flute and an ocarina."
            - wait 2
            - chat "Flute, Ocarina, either of those sound interesting to you?"
            - narrate "Flute|Ocarina|No thanks"
        8:
          trigger: /Regex:Flute|flute/
          script:
            - chat "I sell that for 600 widgets. Sound fair to you?"
            - wait 2
            - narrate "Yes|No|Bribe(Knowledge Stones Required)"
            - zap step:FlutePay
        9:
          trigger: /Regex:Ocarina|ocarina/
          script:
            - chat "I sell that for 600 widgets. Sound fair to you?"
            - wait 2
            - narrate "Yes|No|Bribe(Knowledge Stones Required)"
            - zap step:OcarinaPay
        10:
          trigger: /Regex:No Thanks|Goodbye/
          script:
            - chat "Not to worry, not to worry. Perhaps there's something else."
            - narrate "Wares?|Work?|Moneta?|Rumors?"
        11:
          trigger: /Regex:Moneta|moneta/
          script:
            - chat "This town came up rather suddenly. Some colonists that started integrating-"
            - wait 2
            - chat "with natives, and from there, the birth of major trade developed into - well, this."
            - wait 2
            - chat "You can find both typical wares and more... supernatural wares here."
            - narrate "Wares?|Work?|Moneta?|Rumors?"
        12:
          trigger: /Regex:Rumors|rumor|Rumor|rumors/
          script:
            - chat "Rumors... I suppose I've got one."
            - wait 2
            - chat "Recently, there was a major theft here in Moneta." 
            - wait 2
            - chat "Lots of goods, gold, and other treaasures just up and vanished."
            - wait 2
            - chat "If anyone could recover those... why... they'd be so incredibly rich."
            - wait 2
            - chat "I think the supervisor of Moneta might have some more information, but he's cagey sometimes."
            - narrate "Wares?|Work?|Moneta?|Rumors?"
        13:
          trigger: /Regex:Work|work|jobs|job/
          script:
            - chat "Oh yes. Recently, some of my wagons have disppeared on their way here from Primnee."
            - wait 2
            - chat "I would have them change routes a couple of times, but I believe that either savages-"
            - wait 2
            - chat "or bandits have been ransacking them. If you can find them and recover even some of the goods that-"
            - wait 2
            - chat "have gone missing, I'll pay you handsomely for each one."
            - narrate "Bring goods back to him. Type 'goods' to sell."
    FlutePay:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
            - if "<player.money>" > "600" {
              - execute as_op "eco take <player.name> 600"
              - chat "Thank you for your patronage."
              - give i@MonetaFlute
              - zap 1
              }
              else {
              - chat "It appears you don't have the widgets for this, sir."
              - wait 1
              - chat "Perhaps come back with some more."
              - zap 1
              }
        2:
          trigger: /Regex:No/
          script:
            - chat "Ah, I see. Perhaps there's something else."
            - wait 1
            - narrate "Wares?|Work?|Moneta?|Rumors?"
            - zap 1
        3:
          trigger: /Regex:Bribe/
          script:
            - if <player.inventory.contains[KnowledgeStone]> {
              - chat "I see you've got a knowledge stone on you..."
              - wait 2
              - chat "I'll take off 100 widgets if you give that to me."
              - chat "Sound good?"
              - zap step:FluteBribe
              - narrate "Yes|No"
              }
              else {
              - chat "It appears you don't have anything I want."
              - chat "Will you pay full price?"
              - narrate "Yes|No"
              }
    OcarinaPay:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
            - if "<player.money>" < "20" {
              - execute as_op "eco take <player.name> 600"
              - chat "Thank you for your patronage."
              - give i@MonetaOcarina
              - zap 1
              }
              else {
              - chat "It appears you don't have the widgets for this, sir."
              - wait 1
              - chat "Perhaps come back with some more."
              - zap 1
              }
        2:
          trigger: /Regex:No/
          script:
            - chat "Ah, I see. Perhaps there's something else."
            - wait 1
            - narrate "Wares?|Work?|Moneta?|Rumors?"
            - zap 1
        3:
          trigger: /Regex:Bribe/
          script:
            - if <player.inventory.contains[KnowledgeStone]> {
              - chat "I see you've got a knowledge stone on you..."
              - wait 2
              - chat "I'll take off 100 widgets if you give that to me."
              - chat "Sound good?"
              - zap step:OcarinaBribe
              - narrate "Yes|No"
              }
              else {
              - chat "It appears you don't have anything I want."
              - chat "Will you pay full price?"
              - narrate "Yes|No"
              }
    FeatherPay:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
            - if "<player.money>" < "20" {
              - execute as_op "eco take <player.name> 20"
              - chat "Thank you for your patronage."
              - give i@MonetaFeather
              - zap 1
              }
              else {
              - chat "It appears you don't have the widgets for this, sir."
              - wait 1
              - chat "Perhaps come back with some more."
              - zap 1
              }
        2:
          trigger: /Regex:No/
          script:
            - chat "Ah, I see. Perhaps there's something else."
            - wait 1
            - narrate "Wares?|Work?|Moneta?|Rumors?"
            - zap 1
    TalisPay:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
            - if "<player.money>" > "700" {
              - execute as_op "eco take <player.name> 700"
              - chat "Thank you for your patronage."
              - give i@MonetaNecklace
              - zap 1
              }
              else {
              - chat "It appears you don't have the widgets for this, sir."
              - wait 1
              - chat "Perhaps come back with some more."
              - zap 1
              }
        2:
          trigger: /Regex:No/
          script:
            - chat "Ah, I see. Perhaps there's something else."
            - wait 1
            - narrate "Wares?|Work?|Moneta?|Rumors?"
            - zap 1
        3:
          trigger: /Regex:Bribe/
          script:
            - if <player.inventory.contains[KnowledgeStone]> {
              - chat "I see you've got a knowledge stone on you..."
              - wait 2
              - chat "I'll take off 100 widgets if you give that to me."
              - chat "Sound good?"
              - zap step:TalisBribe
              - narrate "Yes|No"
              }
              else {
              - chat "It appears you don't have anything I want."
              - chat "Will you pay full price?"
              - narrate "Yes|No"
              }
    Talis2Pay:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
            - if "<player.money>" > "700" {
              - execute as_op "eco take <player.name> 700"
              - chat "Thank you for your patronage."
              - give i@MonetaFlute
              - zap 1
              }
              else {
              - chat "It appears you don't have the widgets for this, sir."
              - wait 1
              - chat "Perhaps come back with some more."
              - zap 1
              }
        2:
          trigger: /Regex:No/
          script:
            - chat "Ah, I see. Perhaps there's something else."
            - wait 1
            - narrate "Wares?|Work?|Moneta?|Rumors?"
            - zap 1
        3:
          trigger: /Regex:Bribe/
          script:
            - if <player.inventory.contains[KnowledgeStone]> {
              - chat "I see you've got a knowledge stone on you..."
              - wait 2
              - chat "I'll take off 100 widgets if you give that to me."
              - chat "Sound good?"
              - zap step:Talis2Bribe
              - narrate "Yes|No"
              }
              else {
              - chat "It appears you don't have anything I want."
              - chat "Will you pay full price?"
              - narrate "Yes|No"
              }
    FluteBribe:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
          - execute as_op "eco take <player.name> 500"
          - give MonetaFlute
          - chat "Thank you for your patronage. Take care, now."
          - zap 1
        2:
          trigger: /Regex:No/
          script:
          - chat "No? Alright, well, I sell the Flute for 600 widgets regular. Does that sound okay with you?"
          - narrate "Yes|No|Bribe"
          - zap step:FlutePay
    OcarinaBribe:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
          - take KnowledgeStone
          - execute as_op "eco take <player.name> 500"
          - give MonetaOcarina
          - chat "Thank you for your patronage. Take care, now."
          - zap 1
        2:
          trigger: /Regex:No/
          script:
          - chat "No? Alright, well, I sell the Flute for 600 widgets regular. Does that sound okay with you?"
          - narrate "Yes|No|Bribe"
          - zap step:FlutePay
    TalisBribe:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
          - take KnowledgeStone
          - execute as_op "eco take <player.name> 600"
          - give MonetaNecklace
          - chat "Thank you for your patronage. Take care, now."
          - zap 1
        2:
          trigger: /Regex:No/
          script:
          - chat "No? Alright, well, I sell the Necklace for 700 widgets regular. Does that sound okay with you?"
          - narrate "Yes|No|Bribe"
          - zap step:TalisPay
    Talis2Bribe:
      chat trigger:
        1:
          trigger: /Regex:Yes/
          script:
          - take KnowledgeStone
          - execute as_op "eco take <player.name> 600"
          - give MonetaPendant
          - chat "Thank you for your patronage. Take care, now."
          - zap 1
        2:
          trigger: /Regex:No/
          script:
          - chat "No? Alright, well, I sell the Pendant for 700 widgets regular. Does that sound okay with you?"
          - narrate "Yes|No|Bribe"
          - zap step:Talis2Pay
MonetaFeather:
  type: item
  material: FEATHER
  display name: <&3>Ornamental Feather
  lore:
  - A pretty, dyed feather.
  - Natives would dye their feathers
  - in accordance with rank or achievements.
MonetaFlute:
  type: item
  material: STICK
  display name: <&3>Ornamental Flute
  lore:
  - A native-crafted flute.
  - Has a slightly soft sound.
MonetaOcarina:
  type: item
  material: CLAY_BALL
  display name: <&b>Native Ocarina
  lore:
  - A specially designed flute made from
  - clay. Has a delicate, whistle-like
  - tune when played.
MonetaNecklace:
  type: item
  material: DIAMOND
  display name: <&3>Native Necklace
  lore:
  - A breathtaking native-crafted necklace.
  - The sapphire that rests within
  - is worth a great deal.
MonetaPendant:
  type: item
  material: EMERALD[flags=HIDE_ENCHANTS]
  display name: <&3>Native Pendant
  lore:
  - A stunning native-cut pendant.
  - You feel lucky just holding it.
  enchantments:
  - LUCK:1

#MISERY STORYLINE

miserymarthaa:
  type: assignment
  actions:
    on assignment:
    - narrate "Assignment set."
  interact scripts:
  - 1 miserymarthai
miserymarthai:
  type: interact
  steps:
    1:
      chat trigger:
        1:
          trigger: /Regex:Hello|Hi|Hey|Greetings|Good day/.
          script:
          - chat "*The old woman looks up slowly, then turns to face you, face deathly pale.*"
          - wait 1
          - chat "Please... traveler... save this town from the Sadness..."
          - wait 2
          - chat "*She would reach out, setting a book in your hands."
          - give miserybook1
          - wait 2
          - chat "Please... I can't understand it and..."
          - wait 2
          - chat "Anything... anything you can find out... please.."
          - wait 2
          - chat "Bring me... something back... the Sadness... no..."
miserybook1:
  type: book
  title: Misery Unfolds
  author: Eddie
  signed: true
  text:
  - The night fell, violence erupted. Beware the man who watches in the darkness. Beware those he talks to. No one can be trusted. Prepare for the worst and you might have a chance... *A few drops of blood lie on the page.*
  - The man comes when you least expect, he comes when you think you are ready. He speaks little, his effects are major. The people you once call friends will change. The one last thing I can say is the children... purify all. I'm sorry for anything that happens.
  - My parents couldn't stop it... nobody could... beware the misery and the sadness which dwells within... beware...
      